{
  "name": "cuda12.9-ubuntu24.04",
  "build": {
    "context": "${localWorkspaceFolder}/build_tools/docker",
    "dockerfile": "${localWorkspaceFolder}/build_tools/docker/Dockerfile",
    "args": {
      "BASE_IMAGE": "nvcr.io/nvidia/cuda:12.9.1-devel-ubuntu22.04",
      "LINUX_DISTRO": "ubuntu22.04",
      "LLVM_VERSION": 20
    }
  },
  "remoteUser": "ubuntu",
  "updateRemoteUserUID": true,
  "runArgs": [
    "--name",
    "cuda12.9-ubuntu24.04-${localEnv:USER:ubuntu}-${devcontainerId}",
    "--cap-add=SYS_PTRACE",
    "--security-opt",
    "seccomp=unconfined",
    "--shm-size=1g",
    "--ulimit",
    "memlock=-1",
    "--network=host"
  ],
  "hostRequirements": {
    "gpu": "optional"
  },
  "workspaceMount": "source=${localWorkspaceFolder}/..,target=/workspaces/TensorRT-Incubator,type=bind,consistency=cached",
  "workspaceFolder": "/workspaces/TensorRT-Incubator/mlir-tensorrt",
  "customizations": {
    "vscode": {
      "extensions": [
        "llvm-vs-code-extensions.vscode-clangd",
        "llvm-vs-code-extensions.vscode-mlir",
        "eamodio.gitlens",
        "ms-python.black-formatter",
        "ms-python.python"
      ],
      "settings": {
        "[python]": {
          "editor.defaultFormatter": "ms-python.black-formatter"
        },
        "mlir.pdll_compilation_databases": [
          "build/pdll_compile_commands.yml"
        ],
        "mlir.server_path": "build/bin/mlir-tensorrt-lsp-server",
        "files.exclude": {
          "**/.git": true,
          "**/.cache": true,
          "**/.venv*": true
        },
        "files.watcherExclude": {
          "**/.git/objects/**": true,
          "**/.git/subtree-cache/**": true,
          "**/.private*": true,
          "**/.venv*/**": true,
          "**/build/**": true
        },
        "search.exclude": {
          "**/.private*": true,
          "**/.venv*": true,
          "**/build": true
        },
        "python.analysis.include": [
          "integrations/python",
          "integrations/python/internal"
        ],
        "python.analysis.typeCheckingMode": "basic",
        "python.analysis.extraPaths": [
          "build/python_packages/mlir_tensorrt_compiler",
          "build/python_packages/mlir_tensorrt_runtime",
          "build/python_packages/tools"
        ],
        "python.analysis.exclude": [
          "**/build/**",
          "**/.cache.cpm/**",
          "**/*bazel*/**",
          "**/build_tools/**",
          "third_party"
        ]
      }
    }
  },
  "features": {
    "ghcr.io/devcontainers/features/common-utils:2": {
      "installZsh": true,
      "installOhMyZsh": true,
      "configureZshAsDefaultShell": false,
      "upgradePackages": false,
      "username": "ubuntu",
      "userUid": "automatic",
      "userGid": "automatic"
    },
    "ghcr.io/devcontainers/features/git:1": {}
  }
}